# Спринт 2 — Расширенная функциональность

Продолжительность: 2 недели. Цель — добавить задачи, активность и аналитические данные, улучшить UX.

## Цели

- Расширить backend новыми сущностями (Tasks, ActivityLog, Stats).
- Подключить Celery/Redis для фоновых задач и уведомлений.
- Реализовать на фронте доску сделок, задачи и ленту активности.

## Задачи по ролям

### Backend

1. Модель `Task` и CRUD API (фильтры по статусу, assignee, overdue).
2. Модель `ActivityLog` (generic), сигналы для логирования изменений.
3. Endpoint `/stats/overview/` с агрегированными метриками и кэшированием.
4. Настройка Celery worker + beat (напоминания по задачам, пересчёт статистики).
5. Документация API (drf-spectacular) и обновление схем.

### Frontend/BFF

1. Kanban-представление сделок (`/deals/board/`), использование DTO и сервисов.
2. Страница задач с фильтрами и сменой статуса (HTMX actions).
3. Лента активности (подгрузка partial'ов, пагинация).
4. Улучшение UX (состояния загрузки, уведомления, toasts).
5. Реализация dashboard-агрегатора (параллельные запросы, кэш).

### DevOps / Общее

1. Добавление Celery и Redis сервисов в compose.
2. Настройка Sentry (или аналога) для backend/front.
3. Логи + request_id сквозь nginx → backend → BFF.
4. Написание smoke-тестов для ключевых фич.

## Definition of Done

- Доступна доска сделок, список задач, лента активности.
- ActivityLog пополняется при изменениях сущностей.
- Celery выполняет напоминания/пересчёт статистики.
- Dashboard показывает агрегированные данные.
- Документация отражает новые API и сценарии.
